<% provide(:title, 'All user') %>
<h1>All users</h1>
<ul class="users">
<li> <b style="color: red"> You: </b>
	<%= gravatar_for current_user, size: 50 %>
	<%= link_to current_user.tk, current_user %> -- <b> region: </b> <%= current_user.region %> -- <b> permission: </b> <%= current_user.permission %> -- <b> Id: </b> <%= current_user.accountname %>
</li>
<% @users.each do |user| %>

<%# view for A1 %>
<% if (current_user.tk == "A1") %>
<% if !(user.accountname == current_user.accountname) && user.tk == "A2" %>
<li>
<%= gravatar_for user, size: 50 %>
<%= link_to user.tk, user %> -- <b> region: </b> <%= user.region %> -- <b> permission: </b> <%= user.permission %> -- <b> Id: </b> <%= user.accountname %>
<%= link_to 'Edit', '#', class: 'btn btn-primary' %>
<%= link_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?' }, remote: :true, class: "destroy-user btn btn-warning" %>
<% if current_user.permission == "true" %>
  <% if user.permission == "true" %>
  	<%= link_to 'Khóa quyền', "/permission/#{user.id}", class: 'btn btn-primary' %>
  <% else %>
  	<%= link_to 'Cấp quyền', "/permission/#{user.id}", class: 'btn btn-primary' %>
  <% end %>
<% end %>
</li>
<% end %>
<% end %>

<%# view for A2 %>
<% if (current_user.tk == "A2") %>
<% if !(user.accountname == current_user.accountname) && checkcode(current_user.accountname,user.accountname) == true && user.tk == "A3" %>
<li>
<%= gravatar_for user, size: 50 %>
<%= link_to user.tk, user %> -- <b> region: </b> <%= user.region %> -- <b> permission: </b> <%= user.permission %> -- <b> Id: </b> <%= user.accountname %>
<%= link_to 'Edit', '#', class: 'btn btn-primary' %>
<%= link_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?' }, remote: :true, class: "destroy-user btn btn-warning" %>
<% if current_user.permission == "true" %>
  <% if user.permission == "true" %>
  	<%= link_to 'Khóa quyền', "/permission/#{user.id}", class: 'btn btn-primary' %>
  <% else %>
  	<%= link_to 'Cấp quyền', "/permission/#{user.id}", class: 'btn btn-primary' %>
  <% end %>
<% end %>
</li>
<% end %>
<% end %>

<%# view for A3 %>
<% if (current_user.tk == "A3") %>
<% if !(user.accountname == current_user.accountname) && checkcode(current_user.accountname,user.accountname) == true && user.tk == "B1" %>
<li>
<%= gravatar_for user, size: 50 %>
<%= link_to user.tk, user %> -- <b> region: </b> <%= user.region %> -- <b> permission: </b> <%= user.permission %> -- <b> Id: </b> <%= user.accountname %>
<%= link_to 'Edit', '#', class: 'btn btn-primary' %>
<%= link_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?' }, remote: :true, class: "destroy-user btn btn-warning" %>
<% if current_user.permission == "true" %>
  <% if user.permission == "true" %>
  	<%= link_to 'Khóa quyền', "/permission/#{user.id}", class: 'btn btn-primary' %>
  <% else %>
  	<%= link_to 'Cấp quyền', "/permission/#{user.id}", class: 'btn btn-primary' %>
  <% end %>
<% end %>
</li>
<% end %>
<% end %>


<%# view for B1 %>
<% if (current_user.tk == "B1") %>
<% if !(user.accountname == current_user.accountname) && checkcode(current_user.accountname,user.accountname) == true && user.tk == "B2" %>
<li>
<%= gravatar_for user, size: 50 %>
<%= link_to user.tk, user %> -- <b> region: </b> <%= user.region %> -- <b> permission: </b> <%= user.permission %> -- <b> Id: </b> <%= user.accountname %>
<%= link_to 'Edit', '#', class: 'btn btn-primary' %>
<%= link_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?' }, remote: :true, class: "destroy-user btn btn-warning" %>
<% if current_user.permission == "true" %>
  <% if user.permission == "true" %>
  	<%= link_to 'Khóa quyền', "/permission/#{user.id}", class: 'btn btn-primary' %>
  <% else %>
  	<%= link_to 'Cấp quyền', "/permission/#{user.id}", class: 'btn btn-primary' %>
  <% end %>
<% end %>
</li>
<% end %>
<% end %>


<% end %>	
</ul>																																																																																																																																													
																																																																																																																																					